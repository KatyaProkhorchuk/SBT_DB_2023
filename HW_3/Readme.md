## CouchDB and PouchDB

### CouchDB 

CouchDB — это база данных NoSQL, созданная в 2005 году Дэмиеном Кацем и в настоящее время поддерживаемая Apache Software Foundation. 

### PouchDB

PouchDB — это реализация CouchDB на JavaScript.  Его цель — эмулировать API CouchDB с почти идеальной точностью при работе в браузере или в Node.js.

По сути это 2 базы данных, которые ориентированы на документы, так же они могут работать в браузере и на сервере. Они `OpenSource` и используют модель данных NoSQL


`CouchDB` - это база данных, которая сфокусирована на сохранении информации в формате JSON и реализована на языке программирования Erlang.

* Она является мощным инструментом на рынке баз данных, который направлен на упрощение различных задач, доступных для выполнения на различных устройствах без сложностей.

* CouchDB отличается от баз данных, основанных на SQL запросах.

* Этот инструмент является частью проекта Apache.

* Приложения могут использовать CouchDB для хранения данных в формате JSON и получения доступа к ним через специальный интерфейс.

* Он предлагает новый подход к сохранению, индексации и доступу к данным.

* CouchDB использует модель мастер-мастер репликации, что означает, что каждый узел может быть как источником, так и получателем данных.

* CouchDB поддерживает MapReduce для выполнения запросов и агрегации данных.

`PouchDB` - это клиентская база данных, предназначенная для работы в браузере или других средах, поддерживающих JavaScript. 

* Одним из важных преимуществ PouchDB является его способность синхронизироваться с CouchDB, что позволяет легко синхронизировать данные между локальным хранилищем в PouchDB и базой данных CouchDB на сервере.

* Она также поддерживает работу в автономном режиме, что позволяет приложениям сохранять данные локально на устройстве и синхронизировать их с сервером при возможности подключения.

* API PouchDB напоминает API CouchDB, что облегчает разработку приложений, использующих обе базы данных.


Теперь приступим к установке `CouchDB`

Для начала загрузим образ с `docker hub`

`docker pull couchdb`

Дальше запускаем `CouchDB` в контейнере передавая логин и пароль

`docker run --rm -d --name mycouchdb -p 5984:5984 -e COUCHDB_USER=login -e COUCHDB_PASSWORD=password couchdb:latest`

Теперь в браузере переходим на `http://127.0.0.1:5984/_utils`

![Красота](image/start.png) 

Тут вводим гениальные `login` и `password`

Теперь надо бы создать базу данных

![create_db](image/create_db.png)

Теперь есть база данных

![start_work](image/start_work_with_db.png)


Добавим в БД один документ в котором должно быть поле `name` с  моей фамилией

![create_doc](image/create_base.png)

Идем в `CORS` и выбираем флаг `All domains ( * )`

![settings](image/setting.png)

В ДЗ3.html прописываем на 25 строчке в секции Remote ссылку до нашей базы: `http://login:password@localhost:5984/myfirstdb`

И еще в 18 строке поменяла путь на `https://cdnjs.cloudflare.com/ajax/libs/pouchdb/7.2.2/pouchdb.min.js` 

Теперь при нажатии на `sync` появляется фамилия

![done_sync](image/start_sync.png)

Теперь остановим CouchDB/Couchbase сервер

![docker_stop](image/docker_stop.png)

Обновим `ДЗ3.html`, нажмем `sync`, и там по прежнему моя фамилия, хотя на скрине видно что подключиться не удается

![after_update](image/after_update.png)

### Вывод

Данные из Remote CouchDB синхронизировались с данными из `Local PouchDB`. Поэтому в случае сетевой недоступности `Couch html` все равно доступна и содержит данные с момента последнего подключения, которые сохранились в локальной `PouchDB`

Сохраненная страница из `chrome` находится в `PouchDB.html`